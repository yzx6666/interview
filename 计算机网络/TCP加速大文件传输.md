# TCP加速大文件传输
1.  ## 建立连接优化：
    - **TCP在建立连接时，如果丢包会进入重试，重试时间时1s、2s、4s、8s的指数递增间隔，缩短定时器可以让TCP在丢包环境下建立连接时间更快，非常适用于高并发短链接的业务场景**
2.  ## 平滑发包：
    - **在RTT内均匀发包，规避微分时间内的流量突发，尽量避免瞬时拥塞**
3.  ## 丢包预判：
    - **有些网络的丢包是有规律性的，例如每隔一段时间出现一次丢包，例如每次丢包都连续丢几个等，如果程序能自动发现这个规律（有些不明显），就可以针对性提前多发数据，减少重传时间、提高有效发包率**
4.  ## RTO 探测：
    - **若始终收不到 ACK 报文，则需要触发 RTO 定时器。RTO 定时器一般都时间非常长，会浪费很多等待时间，而且一旦 RTO，CWND 就会骤降（标准 TCP），因此利用 Probe 提前与 RTO 去试探，可以规避由于 ACK 报文丢失而导致的速度下降问题**
5.  ## 带宽评估：
    - **通过单位时间内收到的 ACK 或 SACK 信息可以得知客户端有效接收速率，通过这个速率可以更合理的控制发包速度**
6.  ## 带宽争抢：
    - **有些场景（例如合租）是大家互相挤占带宽的，假如你和室友各 1Mbps 的速度看电影，会把 2Mbps 出口占满，而如果一共有 3 个人看，则每人只能分到 1/3。若此时你的流量达到 2Mbps，而他俩还都是 1Mbps，则你至少仍可以分到 2/(2+1+1) * 2Mbps = 1Mbps 的 50% 的带宽，甚至更多，代价就是服务器侧的出口流量加大，增加成本。（TCP 优化的本质就是用带宽换用户体验感）**