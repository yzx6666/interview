# **虚拟内存**

## **虚拟内存：操作系统为每一个进程分配一个独立的地址空间，就是虚拟内存。虚拟内存与物理内存存在映射关系，通过页表寻址完成虚拟地址和物理地址的转换。**

<br/>

## **为什么要用虚拟内存：早期的内存分配方法有问题**
### 1.  **进程地址空间不隔离。会导致数据被随意修改**
### 2.  **内存使用效率低**
### 3.  **程序运行地址不确定。操作系统随机为进程分配内存空间，所以程序运行的地址不确定。**

<br/>

## **虚拟内存的好处：**
1.  ### 扩大地址空间。每个进程独占一个4G空间，虽然真实物理内存没那么多。

2.  ### 内存保护：防止不同进程对物理内存的争夺和践踏，可以对特定内存地址提供写保护，防止恶意篡改。

3.  ### 可以实现内存共享，方便进程通信。

4.  ### 可以避免内存碎片，虽然物理内存可能不连续，但映射到虚拟内存上可以连续。


<br/>

## **使用虚拟内存的缺点：**
1.  ### **虚拟内存需要额外构建数据结构，占用空间。**

2.  ### **虚拟地址到物理地址的转换，增加了执行时间。**

3.  ### **页面换入换出耗时。**

4.  ### **一页如果只有一部分数据，浪费内存。**